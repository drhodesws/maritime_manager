{% extends "base.html" %}
{% block content %}
<h2>Jobs</h2>
<a href="{{ url_for('jobs.create_job') }}" class="btn btn-success mb-3">New Job</a>

<table class="table table-striped">
  <thead class="table-dark">
    <tr>
      <th>Job #</th>
      <th>Date Created</th>
      <th>Scheduled</th>
      <th>Vessel</th>
      <th>Customer</th>
      <th>Location</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for job in jobs %}
    <tr>
      <td><strong>{{ job.job_number }}</strong></td>
      <td>{{ job.date_created.strftime('%m/%d/%Y') }}</td>
      <td>{{ job.scheduled_date.strftime('%m/%d/%Y') }}</td>
      <td>{{ job.vessel.vessel_name if job.vessel else '—' }}</td>
      <td>{{ job.customer.name if job.customer else '—' }}</td>
      <td>{{ job.location }}</td>
      <td>
        <a href="{{ url_for('jobs.edit_job', id=job.id) }}" class="btn btn-warning btn-sm">Edit</a>
        <form method="POST" action="{{ url_for('jobs.delete_job', id=job.id) }}" style="display:inline;">
          <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Delete job?')">Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}